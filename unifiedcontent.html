<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Authenticity Checker - Facts & Fakes AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .features-badge {
            display: inline-flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .main-content {
            padding: 40px;
        }

        .input-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px dashed #dee2e6;
            transition: all 0.3s ease;
        }

        .input-section:hover {
            border-color: #667eea;
            background: #f1f3ff;
        }

        .input-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .input-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 12px 24px;
            border: none;
            background: #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .text-input {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #5a6fd8;
        }

        .file-upload.dragover {
            background: rgba(102, 126, 234, 0.15);
            border-color: #4c63d2;
            transform: scale(1.02);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .sample-content {
            margin-top: 15px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .sample-content h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .sample-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .sample-btn {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }

        .sample-btn:hover {
            background: #5a6fd8;
        }

        .analyze-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .analyze-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .analyze-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .progress-section {
            display: none;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .progress-section.show {
            display: block;
        }

        .progress-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .progress-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .progress-item.active {
            border-left-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        }

        .progress-item.complete {
            border-left-color: #28a745;
        }

        .progress-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-status {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .results-section {
            display: none;
            margin-top: 30px;
        }

        .results-section.show {
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .authenticity-score {
            display: inline-block;
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
        }

        .score-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#28a745 0deg, #28a745 var(--score-angle), #e9ecef var(--score-angle));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 50%;
        }

        .score-text {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .score-label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 5px;
        }

        .classification {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .classification.highly-authentic { color: #28a745; }
        .classification.likely-authentic { color: #20c997; }
        .classification.moderately-authentic { color: #ffc107; }
        .classification.questionable { color: #fd7e14; }
        .classification.low-authenticity { color: #dc3545; }

        .summary-text {
            font-size: 1.1rem;
            color: #495057;
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border-left: 5px solid #667eea;
        }

        .metric-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #f1f3f5;
        }

        .metric-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .metric-label {
            font-weight: 600;
            color: #495057;
        }

        .metric-value {
            font-weight: 700;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .metric-value.high { background: #d4edda; color: #155724; }
        .metric-value.medium { background: #fff3cd; color: #856404; }
        .metric-value.low { background: #f8d7da; color: #721c24; }

        .detailed-analysis {
            margin-top: 30px;
        }

        .analysis-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
        }

        .analysis-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .analysis-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .analysis-content {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.05);
        }

        .analysis-content.active {
            display: block;
        }

        .finding-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .finding-item h5 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .finding-item p {
            color: #495057;
            margin-bottom: 5px;
        }

        .action-bar {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: #667eea;
            color: white;
        }

        .action-btn.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #dc3545;
        }

        .risk-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .risk-very-low { background: #d4edda; color: #155724; }
        .risk-low { background: #d1ecf1; color: #0c5460; }
        .risk-medium { background: #fff3cd; color: #856404; }
        .risk-high { background: #f5c6cb; color: #721c24; }
        .risk-very-high { background: #f8d7da; color: #721c24; }

        @media (max-width: 768px) {
            .container {
                border-radius: 0;
                margin: -20px;
            }

            .main-content {
                padding: 20px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .features-badge {
                gap: 8px;
            }

            .badge {
                font-size: 0.8rem;
                padding: 6px 12px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .analysis-tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Content Authenticity Checker</h1>
            <p>Advanced AI Detection & Plagiarism Verification</p>
            <div class="features-badge">
                <span class="badge">ü§ñ AI Pattern Detection</span>
                <span class="badge">üîç Plagiarism Verification</span>
                <span class="badge">üåê Web Search Matching</span>
                <span class="badge">üìä Linguistic Analysis</span>
                <span class="badge">‚úçÔ∏è Style Authenticity</span>
            </div>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2>üéØ Analyze Your Content</h2>
                
                <div class="input-tabs">
                    <button class="tab-button active" onclick="switchTab('text')">üìù Text Input</button>
                    <button class="tab-button" onclick="switchTab('file')">üìÅ File Upload</button>
                </div>

                <div class="tab-content active" id="text-tab">
                    <textarea 
                        class="text-input" 
                        id="textInput" 
                        placeholder="Paste your content here for comprehensive authenticity analysis...&#10;&#10;Our unified system will check for:&#10;‚Ä¢ AI generation patterns&#10;‚Ä¢ Plagiarism indicators&#10;‚Ä¢ Content similarity&#10;‚Ä¢ Writing style authenticity&#10;‚Ä¢ Linguistic patterns"
                    ></textarea>
                </div>

                <div class="tab-content" id="file-tab">
                    <div class="file-upload" id="fileUpload">
                        <div class="file-upload-icon">üìÑ</div>
                        <h3>Drop files here or click to upload</h3>
                        <p>Supports: TXT, PDF, DOCX files (max 10MB)</p>
                        <input type="file" id="fileInput" accept=".txt,.pdf,.docx" style="display: none;">
                    </div>
                </div>

                <div class="sample-content">
                    <h4>üß™ Try Sample Content:</h4>
                    <div class="sample-buttons">
                        <button class="sample-btn" onclick="loadSample('ai')">AI-Generated Text</button>
                        <button class="sample-btn" onclick="loadSample('human')">Human-Written Text</button>
                        <button class="sample-btn" onclick="loadSample('mixed')">Mixed Content</button>
                        <button class="sample-btn" onclick="loadSample('academic')">Academic Style</button>
                    </div>
                </div>

                <button class="analyze-button" onclick="analyzeContent()" id="analyzeBtn">
                    üöÄ Analyze Content Authenticity
                </button>
            </div>

            <div class="progress-section" id="progressSection">
                <h3>üî¨ Analysis in Progress</h3>
                <div class="progress-grid" id="progressGrid">
                    <!-- Progress items will be populated dynamically -->
                </div>
            </div>

            <div class="results-section" id="resultsSection">
                <!-- Results will be populated dynamically -->
            </div>
        </div>
    </div>

    <script>
        let analysisData = null;

        // Sample content for testing
        const sampleTexts = {
            ai: "Furthermore, it is important to note that artificial intelligence represents a paradigm shift in how we approach content creation. Moreover, this innovative technology leverages advanced algorithms to optimize the writing process. Additionally, comprehensive studies indicate that these cutting-edge solutions provide significant benefits across multiple industries. In conclusion, the implementation of AI-driven systems streamlines operations and enhances productivity.",
            
            human: "I can't believe what happened today! So I was walking to the coffee shop around the corner from my apartment, and I see this guy just standing there with like 20 dogs. Twenty! I'm not even exaggerating. Some were huge German Shepherds, others were tiny Chihuahuas, and they were all just chilling together. Turns out he runs a dog-walking service and was doing a group walk. Made my morning honestly - sometimes you just need to see something that makes you smile.",
            
            mixed: "According to recent studies, machine learning algorithms have demonstrated significant improvements in natural language processing tasks. However, I've personally noticed that when I use AI writing tools, the output often feels somewhat robotic and lacks the personal touch that makes writing engaging. The technology is impressive, don't get me wrong, but there's still something special about human creativity that can't be replicated.",
            
            academic: "The present study examines the efficacy of automated content detection systems in identifying artificially generated text. Through a comprehensive analysis of linguistic patterns, syntactic structures, and semantic coherence, we demonstrate that current detection methodologies achieve approximately 85% accuracy rates. These findings have significant implications for academic integrity and content verification processes in digital environments."
        };

        // Tab switching functionality
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // Sample content loading
        function loadSample(type) {
            const textarea = document.getElementById('textInput');
            textarea.value = sampleTexts[type];
            
            // Switch to text tab if not already active
            switchTab('text');
            document.querySelectorAll('.tab-button')[0].classList.add('active');
            document.querySelectorAll('.tab-button')[1].classList.remove('active');
        }

        // File upload handling
        document.getElementById('fileUpload').addEventListener('click', () => {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', handleFileUpload);

        // Drag and drop handling
        const fileUpload = document.getElementById('fileUpload');
        
        fileUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUpload.classList.add('dragover');
        });

        fileUpload.addEventListener('dragleave', () => {
            fileUpload.classList.remove('dragover');
        });

        fileUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUpload.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileUpload({target: {files: files}});
            }
        });

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Check file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                alert('File size too large. Please choose a file smaller than 10MB.');
                return;
            }

            // Check file type
            const allowedTypes = ['text/plain', 'application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            if (!allowedTypes.includes(file.type) && !file.name.match(/\.(txt|pdf|docx)$/i)) {
                alert('Unsupported file type. Please choose a TXT, PDF, or DOCX file.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                // For now, we'll handle text files directly
                // In production, you'd need server-side processing for PDF/DOCX
                if (file.type === 'text/plain') {
                    document.getElementById('textInput').value = e.target.result;
                    switchTab('text');
                } else {
                    alert('PDF and DOCX processing requires server-side handling. Please convert to text format for now.');
                }
            };
            
            if (file.type === 'text/plain') {
                reader.readAsText(file);
            }
        }

        // Main analysis function
        async function analyzeContent() {
            const textInput = document.getElementById('textInput').value.trim();
            
            if (!textInput) {
                alert('Please enter some text to analyze.');
                return;
            }

            if (textInput.length < 50) {
                alert('Please enter at least 50 characters for accurate analysis.');
                return;
            }

            // Disable button and show progress
            const analyzeBtn = document.getElementById('analyzeBtn');
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = 'üî¨ Analyzing...';

            showProgressSection();
            hideResultsSection();

            try {
                // Start progress simulation
                simulateProgress();

                // Make API call
                const response = await fetch('https://ai-detector-backend-g4mj.onrender.com/api/analyze-content-authenticity', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: textInput
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                analysisData = data;

                // Complete progress and show results
                completeProgress();
                setTimeout(() => {
                    showResults(data);
                }, 1000);

            } catch (error) {
                console.error('Analysis error:', error);
                showError('Analysis failed. Please try again or check your connection.');
            } finally {
                // Re-enable button
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = 'üöÄ Analyze Content Authenticity';
            }
        }

        function showProgressSection() {
            const progressSection = document.getElementById('progressSection');
            progressSection.classList.add('show');

            const progressSteps = [
                { id: 'ai-patterns', title: 'ü§ñ AI Pattern Detection', description: 'Analyzing AI writing signatures...' },
                { id: 'linguistic', title: 'üìä Linguistic Analysis', description: 'Examining vocabulary and structure...' },
                { id: 'plagiarism', title: 'üîç Plagiarism Detection', description: 'Checking for copied content...' },
                { id: 'web-search', title: 'üåê Web Verification', description: 'Searching for similar content...' },
                { id: 'style-auth', title: '‚úçÔ∏è Style Authentication', description: 'Analyzing writing authenticity...' },
                { id: 'final-scoring', title: 'üéØ Final Scoring', description: 'Calculating authenticity score...' }
            ];

            const progressGrid = document.getElementById('progressGrid');
            progressGrid.innerHTML = progressSteps.map(step => `
                <div class="progress-item" id="progress-${step.id}">
                    <h4>${step.title}</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fill-${step.id}"></div>
                    </div>
                    <div class="progress-status" id="status-${step.id}">${step.description}</div>
                </div>
            `).join('');
        }

        function simulateProgress() {
            const steps = ['ai-patterns', 'linguistic', 'plagiarism', 'web-search', 'style-auth', 'final-scoring'];
            let currentStep = 0;

            function progressStep() {
                if (currentStep < steps.length) {
                    const stepId = steps[currentStep];
                    const progressItem = document.getElementById(`progress-${stepId}`);
                    const progressFill = document.getElementById(`fill-${stepId}`);
                    const statusText = document.getElementById(`status-${stepId}`);

                    // Activate current step
                    progressItem.classList.add('active');
                    
                    // Animate progress bar
                    progressFill.style.width = '100%';
                    
                    // Update status after animation
                    setTimeout(() => {
                        statusText.textContent = 'Complete ‚úÖ';
                        progressItem.classList.remove('active');
                        progressItem.classList.add('complete');
                        currentStep++;
                        
                        if (currentStep < steps.length) {
                            setTimeout(progressStep, 300);
                        }
                    }, 800);
                }
            }

            progressStep();
        }

        function completeProgress() {
            // Mark all steps as complete
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active');
                item.classList.add('complete');
                const fill = item.querySelector('.progress-fill');
                const status = item.querySelector('.progress-status');
                fill.style.width = '100%';
                status.textContent = 'Complete ‚úÖ';
            });
        }

        function hideResultsSection() {
            document.getElementById('resultsSection').classList.remove('show');
        }

        function showResults(data) {
            const resultsSection = document.getElementById('resultsSection');
            const authenticity = data.authenticity_scoring || {};
            const report = data.comprehensive_report || {};
            
            resultsSection.innerHTML = generateResultsHTML(data);
            resultsSection.classList.add('show');

            // Scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function generateResultsHTML(data) {
            const authenticity = data.authenticity_scoring || {};
            const report = data.comprehensive_report || {};
            const score = authenticity.overall_authenticity || 50;
            const classification = authenticity.classification || 'Unknown';
            
            // Generate classification class for styling
            const classificationClass = classification.toLowerCase().replace(/\s+/g, '-');
            
            return `
                <div class="results-header">
                    <div class="authenticity-score">
                        <div class="score-circle" style="--score-angle: ${score * 3.6}deg;">
                            <div class="score-text">
                                <div class="score-number">${score.toFixed(1)}</div>
                                <div class="score-label">Authenticity</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="classification ${classificationClass}">
                        ${classification}
                    </div>
                    
                    <div class="summary-text">
                        ${report.summary_text || 'Analysis completed successfully.'}
                    </div>
                </div>

                <div class="metrics-grid">
                    ${generateMetricsCards(data)}
                </div>

                <div class="detailed-analysis">
                    <div class="analysis-tabs">
                        <button class="analysis-tab active" onclick="switchAnalysisTab('overview')">üìä Overview</button>
                        <button class="analysis-tab" onclick="switchAnalysisTab('ai-detection')">ü§ñ AI Detection</button>
                        <button class="analysis-tab" onclick="switchAnalysisTab('plagiarism')">üîç Plagiarism</button>
                        <button class="analysis-tab" onclick="switchAnalysisTab('linguistic')">üìù Linguistic</button>
                        <button class="analysis-tab" onclick="switchAnalysisTab('recommendations')">üí° Recommendations</button>
                    </div>

                    ${generateAnalysisContent(data)}
                </div>

                <div class="action-bar">
                    <div class="action-buttons">
                        <button class="action-btn primary" onclick="shareResults()">
                            üì§ Share Results
                        </button>
                        <button class="action-btn secondary" onclick="saveResults()">
                            üíæ Save Report
                        </button>
                        <button class="action-btn secondary" onclick="printResults()">
                            üñ®Ô∏è Print Report
                        </button>
                        <button class="action-btn secondary" onclick="analyzeNew()">
                            üîÑ Analyze New Content
                        </button>
                    </div>
                </div>
            `;
        }

        function generateMetricsCards(data) {
            const authenticity = data.authenticity_scoring || {};
            const components = authenticity.component_scores || {};
            const specificRisks = authenticity.specific_risks || {};
            
            return `
                <div class="metric-card">
                    <h4>üéØ Authenticity Components</h4>
                    <div class="metric-item">
                        <span class="metric-label">AI Detection</span>
                        <span class="metric-value ${getScoreClass(components.ai_detection_authenticity || 50)}">${(components.ai_detection_authenticity || 50).toFixed(1)}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Linguistic Patterns</span>
                        <span class="metric-value ${getScoreClass(components.linguistic_authenticity || 50)}">${(components.linguistic_authenticity || 50).toFixed(1)}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Style Analysis</span>
                        <span class="metric-value ${getScoreClass(components.style_authenticity || 50)}">${(components.style_authenticity || 50).toFixed(1)}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Plagiarism Check</span>
                        <span class="metric-value ${getScoreClass(components.plagiarism_authenticity || 50)}">${(components.plagiarism_authenticity || 50).toFixed(1)}%</span>
                    </div>
                </div>

                <div class="metric-card">
                    <h4>‚ö†Ô∏è Risk Assessment</h4>
                    <div class="metric-item">
                        <span class="metric-label">AI Generation Risk</span>
                        <span class="risk-indicator risk-${specificRisks.ai_generation_risk || 'unknown'}">${(specificRisks.ai_generation_risk || 'unknown').replace('_', ' ')}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Plagiarism Risk</span>
                        <span class="risk-indicator risk-${specificRisks.plagiarism_risk || 'unknown'}">${(specificRisks.plagiarism_risk || 'unknown').replace('_', ' ')}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Similarity Risk</span>
                        <span class="risk-indicator risk-${specificRisks.similarity_risk || 'unknown'}">${(specificRisks.similarity_risk || 'unknown').replace('_', ' ')}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Overall Confidence</span>
                        <span class="metric-value ${getConfidenceClass(authenticity.confidence || 'Medium')}">${authenticity.confidence || 'Medium'}</span>
                    </div>
                </div>

                <div class="metric-card">
                    <h4>üìà Analysis Details</h4>
                    <div class="metric-item">
                        <span class="metric-label">Content Length</span>
                        <span class="metric-value medium">${data.text_length || 0} characters</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Analysis Type</span>
                        <span class="metric-value high">Unified Authenticity</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Engines Used</span>
                        <span class="metric-value high">5 Analysis Engines</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Processing Time</span>
                        <span class="metric-value medium">${getProcessingTime()}</span>
                    </div>
                </div>
            `;
        }

        function generateAnalysisContent(data) {
            return `
                <div class="analysis-content active" id="overview-content">
                    ${generateOverviewContent(data)}
                </div>
                <div class="analysis-content" id="ai-detection-content">
                    ${generateAIDetectionContent(data)}
                </div>
                <div class="analysis-content" id="plagiarism-content">
                    ${generatePlagiarismContent(data)}
                </div>
                <div class="analysis-content" id="linguistic-content">
                    ${generateLinguisticContent(data)}
                </div>
                <div class="analysis-content" id="recommendations-content">
                    ${generateRecommendationsContent(data)}
                </div>
            `;
        }

        function generateOverviewContent(data) {
            const report = data.comprehensive_report || {};
            const findings = report.key_findings || [];
            const trustIndicators = data.authenticity_scoring?.trust_indicators || [];

            return `
                <h4>üìã Analysis Summary</h4>
                <div class="finding-item">
                    <h5>Key Findings</h5>
                    ${findings.map(finding => `<p>‚Ä¢ ${finding}</p>`).join('')}
                </div>
                
                <div class="finding-item">
                    <h5>Trust Indicators</h5>
                    ${trustIndicators.length > 0 ? 
                        trustIndicators.map(indicator => `<p>‚Ä¢ ${indicator}</p>`).join('') :
                        '<p>No specific trust indicators identified.</p>'
                    }
                </div>

                <div class="finding-item">
                    <h5>Recommendation</h5>
                    <p>${data.authenticity_scoring?.recommendation || 'No specific recommendation available.'}</p>
                </div>
            `;
        }

        function generateAIDetectionContent(data) {
            const aiDetection = data.ai_detection || {};
            const aiPatterns = data.ai_pattern_analysis || {};

            return `
                <h4>ü§ñ AI Detection Analysis</h4>
                <div class="finding-item">
                    <h5>AI Likelihood Assessment</h5>
                    <p>AI Generation Probability: <strong>${aiDetection.ai_likelihood || 'N/A'}%</strong></p>
                    <p>Detection Confidence: <strong>${aiDetection.confidence || 'N/A'}%</strong></p>
                    <p>Assessment: ${aiDetection.reasoning || 'No detailed reasoning available.'}</p>
                </div>

                <div class="finding-item">
                    <h5>Pattern Analysis</h5>
                    <p>Pattern Density: <strong>${aiPatterns.pattern_density || 'N/A'}%</strong></p>
                    <p>Risk Level: <strong>${(aiPatterns.risk_level || 'unknown').replace('_', ' ').toUpperCase()}</strong></p>
                    <p>Total Flags: <strong>${aiPatterns.total_flags || 0}</strong></p>
                </div>

                <div class="finding-item">
                    <h5>AI Indicators Detected</h5>
                    ${(aiDetection.ai_indicators || []).length > 0 ? 
                        (aiDetection.ai_indicators || []).map(indicator => `<p>‚Ä¢ ${indicator}</p>`).join('') :
                        '<p>No specific AI indicators detected.</p>'
                    }
                </div>

                <div class="finding-item">
                    <h5>Human Indicators</h5>
                    ${(aiDetection.human_indicators || []).length > 0 ? 
                        (aiDetection.human_indicators || []).map(indicator => `<p>‚Ä¢ ${indicator}</p>`).join('') :
                        '<p>No specific human indicators detected.</p>'
                    }
                </div>
            `;
        }

        function generatePlagiarismContent(data) {
            const plagiarism = data.plagiarism_analysis || {};
            const webVerification = data.web_verification || {};
            const similarity = data.similarity_analysis || {};

            return `
                <h4>üîç Plagiarism Detection Analysis</h4>
                <div class="finding-item">
                    <h5>Plagiarism Risk Assessment</h5>
                    <p>Risk Score: <strong>${plagiarism.plagiarism_risk_score || 'N/A'}%</strong></p>
                    <p>Risk Level: <strong>${(plagiarism.risk_level || 'unknown').replace('_', ' ').toUpperCase()}</strong></p>
                </div>

                <div class="finding-item">
                    <h5>Web Verification Results</h5>
                    <p>Matches Found: <strong>${webVerification.matches_found || 0}</strong></p>
                    <p>High Similarity Matches: <strong>${webVerification.high_similarity_matches || 0}</strong></p>
                    <p>Exact Matches: <strong>${webVerification.exact_matches || 0}</strong></p>
                </div>

                <div class="finding-item">
                    <h5>Content Similarity</h5>
                    <p>Maximum Similarity: <strong>${similarity.max_similarity_score || 'N/A'}%</strong></p>
                    <p>Average Similarity: <strong>${similarity.average_similarity_score || 'N/A'}%</strong></p>
                    <p>Risk Description: ${similarity.risk_description || 'No similarity analysis available.'}</p>
                </div>

                <div class="finding-item">
                    <h5>Risk Factors</h5>
                    ${(plagiarism.risk_factors || []).length > 0 ? 
                        (plagiarism.risk_factors || []).map(factor => `<p>‚Ä¢ ${factor}</p>`).join('') :
                        '<p>No specific risk factors identified.</p>'
                    }
                </div>
            `;
        }

        function generateLinguisticContent(data) {
            const linguistic = data.linguistic_analysis || {};
            const style = data.style_analysis || {};

            return `
                <h4>üìù Linguistic Analysis</h4>
                <div class="finding-item">
                    <h5>Vocabulary Analysis</h5>
                    <p>Vocabulary Diversity: <strong>${linguistic.vocabulary_diversity || 'N/A'}%</strong></p>
                    <p>Average Word Length: <strong>${linguistic.average_word_length || 'N/A'}</strong></p>
                    <p>Human Likeness Score: <strong>${linguistic.human_likeness_score || 'N/A'}%</strong></p>
                </div>

                <div class="finding-item">
                    <h5>Sentence Structure</h5>
                    <p>Average Sentence Length: <strong>${linguistic.average_sentence_length || 'N/A'} words</strong></p>
                    <p>Sentence Variance: <strong>${linguistic.sentence_variance || 'N/A'}</strong></p>
                    <p>Conjunction Density: <strong>${linguistic.conjunction_density || 'N/A'}%</strong></p>
                </div>

                <div class="finding-item">
                    <h5>Writing Style Assessment</h5>
                    <p>Emotional Content: <strong>${style.emotional_content || 'N/A'}%</strong></p>
                    <p>Personal Language: <strong>${style.personal_language || 'N/A'}%</strong></p>
                    <p>Structural Variety: <strong>${style.structural_variety || 'N/A'}%</strong></p>
                </div>

                <div class="finding-item">
                    <h5>Authenticity Indicators</h5>
                    ${linguistic.authenticity_indicators ? 
                        Object.entries(linguistic.authenticity_indicators).map(([key, value]) => 
                            `<p>‚Ä¢ ${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}: ${value ? '‚úÖ' : '‚ùå'}</p>`
                        ).join('') :
                        '<p>No authenticity indicators available.</p>'
                    }
                </div>
            `;
        }

        function generateRecommendationsContent(data) {
            const authenticity = data.authenticity_scoring || {};
            const plagiarism = data.plagiarism_analysis || {};
            const recommendation = authenticity.recommendation || 'No specific recommendations available.';

            return `
                <h4>üí° Recommendations</h4>
                <div class="finding-item">
                    <h5>Primary Recommendation</h5>
                    <p>${recommendation}</p>
                </div>

                <div class="finding-item">
                    <h5>Specific Actions</h5>
                    ${(plagiarism.recommendations || []).length > 0 ? 
                        (plagiarism.recommendations || []).map(rec => `<p>‚Ä¢ ${rec}</p>`).join('') :
                        `<p>‚Ä¢ Review content for any potential issues</p>
                         <p>‚Ä¢ Consider additional verification if needed</p>
                         <p>‚Ä¢ Check sources and citations if applicable</p>`
                    }
                </div>

                <div class="finding-item">
                    <h5>Best Practices</h5>
                    <p>‚Ä¢ Always verify important content through multiple sources</p>
                    <p>‚Ä¢ Use proper citations when referencing other works</p>
                    <p>‚Ä¢ Maintain documentation of content creation process</p>
                    <p>‚Ä¢ Consider peer review for critical content</p>
                    <p>‚Ä¢ Stay updated on detection technology capabilities</p>
                </div>

                <div class="finding-item">
                    <h5>Quality Indicators</h5>
                    <p>This analysis used ${Object.keys(data.analysis_stages || {}).length} different analysis engines to provide comprehensive authenticity assessment.</p>
                    <p>Results are based on current detection technology and should be considered as guidance rather than absolute determination.</p>
                </div>
            `;
        }

        // Helper functions
        function getScoreClass(score) {
            if (score >= 70) return 'high';
            if (score >= 40) return 'medium';
            return 'low';
        }

        function getConfidenceClass(confidence) {
            const conf = confidence.toLowerCase();
            if (conf.includes('high')) return 'high';
            if (conf.includes('low')) return 'low';
            return 'medium';
        }

        function getProcessingTime() {
            return Math.floor(Math.random() * 3 + 2) + 's';
        }

        function switchAnalysisTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.analysis-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.analysis-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + '-content').classList.add('active');
        }

        // Action button functions
        function shareResults() {
            if (navigator.share && analysisData) {
                const authenticity = analysisData.authenticity_scoring || {};
                const score = authenticity.overall_authenticity || 50;
                const classification = authenticity.classification || 'Unknown';
                
                navigator.share({
                    title: 'Content Authenticity Analysis Results',
                    text: `Content Authenticity: ${score.toFixed(1)}% - ${classification}. Analyzed with Facts & Fakes AI.`,
                    url: window.location.href
                });
            } else {
                // Fallback to clipboard
                const authenticity = analysisData?.authenticity_scoring || {};
                const score = authenticity.overall_authenticity || 50;
                const classification = authenticity.classification || 'Unknown';
                const text = `Content Authenticity Analysis Results:\nScore: ${score.toFixed(1)}%\nClassification: ${classification}\nAnalyzed with Facts & Fakes AI - Content Authenticity Checker`;
                
                navigator.clipboard.writeText(text).then(() => {
                    alert('Results copied to clipboard!');
                }).catch(() => {
                    alert('Unable to share. Please copy the results manually.');
                });
            }
        }

        function saveResults() {
            if (!analysisData) return;
            
            const authenticity = analysisData.authenticity_scoring || {};
            const report = analysisData.comprehensive_report || {};
            const timestamp = new Date().toISOString().split('T')[0];
            
            const reportText = `
CONTENT AUTHENTICITY ANALYSIS REPORT
Generated: ${new Date().toLocaleString()}

OVERALL ASSESSMENT:
- Authenticity Score: ${authenticity.overall_authenticity || 'N/A'}%
- Classification: ${authenticity.classification || 'Unknown'}
- Confidence: ${authenticity.confidence || 'Unknown'}

SUMMARY:
${report.summary_text || 'No summary available.'}

KEY FINDINGS:
${(report.key_findings || []).map(finding => `- ${finding}`).join('\n')}

RECOMMENDATION:
${authenticity.recommendation || 'No recommendation available.'}

COMPONENT SCORES:
${Object.entries(authenticity.component_scores || {}).map(([key, value]) => 
    `- ${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())}: ${value.toFixed(1)}%`
).join('\n')}

---
Report generated by Facts & Fakes AI - Content Authenticity Checker
            `.trim();

            const blob = new Blob([reportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `authenticity-report-${timestamp}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function printResults() {
            window.print();
        }

        function analyzeNew() {
            // Reset the form
            document.getElementById('textInput').value = '';
            document.getElementById('progressSection').classList.remove('show');
            document.getElementById('resultsSection').classList.remove('show');
            
            // Scroll to top
            document.querySelector('.input-section').scrollIntoView({ behavior: 'smooth' });
        }

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `
                <strong>Analysis Error:</strong> ${message}
                <br><br>
                <strong>Troubleshooting:</strong>
                <ul>
                    <li>Check your internet connection</li>
                    <li>Ensure your text is at least 50 characters long</li>
                    <li>Try refreshing the page and analyzing again</li>
                </ul>
            `;
            
            const progressSection = document.getElementById('progressSection');
            progressSection.innerHTML = '';
            progressSection.appendChild(errorDiv);
            progressSection.classList.add('show');
        }
    </script>
</body>
</html>